#!/usr/bin/env python
""" Programmer: Chris Bunch (chris@appscale.com)

appscale-relocate-app provides an executable that can be used to tell AppScale
that an already running application should be migrated to a different HTTP and
HTTPS port.
"""


# General-purpose Python library imports
import sys
import traceback


# AppScale library imports
from appscale.tools import version_helper
from appscale.tools.appscale_tools import AppScaleTools
from appscale.tools.local_state import LocalState
from appscale.tools.parse_args import ParseArgs


version_helper.ensure_valid_python_is_used()


if __name__ == "__main__":
  options = ParseArgs(sys.argv[1:], "appscale-relocate-app").args
  try:
    AppScaleTools.relocate_app(options)
    sys.exit(0)
  except Exception, e:
    LocalState.generate_crash_log(e, traceback.format_exc())
    sys.exit(1)
